FROM denoland/deno:alpine as BUILD-STAGE

WORKDIR /app

USER deno

COPY . .

RUN deno cache src/main.ts

EXPOSE 7070

CMD ["run", "--allow-read", "--allow-net=0.0.0.0:7070", "src/main.ts"]