FROM denoland/deno:alpine

WORKDIR /app

USER deno

COPY . .

RUN deno cache src/main.ts

ENV ENV=prod

EXPOSE 7070

CMD ["run", "-A", "--v8-flags=--max-heap-size=4096", "src/main.ts"]